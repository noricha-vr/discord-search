# 機能要件

## 検索機能

| 機能 | 説明 | MVP |
|------|------|-----|
| 自然言語検索 | 「先月の経理の話」のような曖昧な検索 | ✓ |
| 日付・期間絞り込み | 特定期間に絞って検索 | ✓ |
| 発言者絞り込み | 特定ユーザーの発言に絞る | ✓ |
| 添付ファイル有無 | ファイル付きメッセージに絞る | ✓ |
| 添付ファイル内容検索 | PDF等の中身も検索対象 | ✓ |
| Jumpリンク表示 | 検索結果からDiscordにジャンプ | ✓ |

## 検索対象

| 対象 | 含む/含まない |
|------|--------------|
| サーバー内全チャンネル | ✓ 含む |
| スレッド | ✓ 含む |
| DM | × 対象外 |

## データ同期

| 項目 | 仕様 |
|------|------|
| 初回 | 過去の全メッセージを取得・インデックス化 |
| 更新 | 1時間ごとにバッチで新規メッセージを追加 |

## 検索結果表示

| 項目 | 仕様 |
|------|------|
| 表示件数 | 上位5件 |
| 表示内容 | 日時、チャンネル名、メッセージ抜粋、Jumpリンク |

## ユーザーストーリー

### 自然言語検索

> ユーザーとして、曖昧なキーワードで検索したい。
> なぜなら、正確な言葉を覚えていないことが多いから。

```
/search 先月の経理の話
```

### 絞り込み検索

> ユーザーとして、発言者や期間で絞り込みたい。
> なぜなら、誰がいつ言ったかは覚えていることがあるから。

```
/search 経費 from:@妻 period:今月
```

### 添付ファイル検索

> ユーザーとして、PDFの中身も検索したい。
> なぜなら、資料の内容から探したいことがあるから。

```
/search 見積書の金額
```

## 将来的な機能（MVP後）

- チャンネル指定検索
- 検索履歴
- 検索結果のページング（次の5件）
- 検索結果のブックマーク
